# Backend Environment Variables

# Server Port
# Backend listening port for local development. Priority: PORT > SERVER_PORT > 4173
SERVER_PORT=4173

# Platform AI Configuration
# Platform-side AI provider for backend AI features (classification, code rewriting, etc.)
PLATFORM_AI_PROVIDER=dashscope
PLATFORM_AI_MODEL=qwen3-max
PLATFORM_AI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# DashScope API Key
# Platform backend DashScope API key (not user's own key), used for: project classification + code security rewriting
# If empty, AI-related features will degrade to no-op
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# Deploy Target
# Deployment target: local / cloudflare / r2
# - local: Static assets copied to local /apps/<slug>/ and served by Node
# - cloudflare: Deploy via Cloudflare Pages
# - r2: Build on Aliyun, upload static assets to Cloudflare R2, served via Worker gateway
DEPLOY_TARGET=local

# Cloudflare Configuration
# Required only when DEPLOY_TARGET is cloudflare or r2
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id_here
CLOUDFLARE_PAGES_API_TOKEN=your_cloudflare_pages_api_token_here
CLOUDFLARE_PAGES_PROJECT_PREFIX=deploy-your-app

# Storage Type
# Explicitly specify storage backend for application data (projects, users, etc.): file (local JSON) or d1 (Cloudflare D1)
# If not set, defaults to d1. Set to 'file' to use local JSON storage instead.
STORAGE_TYPE=d1

# Cloudflare D1 Configuration (optional)
# Provide these values to store application data in Cloudflare D1 instead of local JSON files.
# CLOUDFLARE_ACCOUNT_ID is used for D1 account ID (shared with other Cloudflare services).
CLOUDFLARE_D1_DATABASE_ID=your_d1_database_id_here
CLOUDFLARE_D1_API_TOKEN=your_d1_api_token_here

# R2 Configuration
# Required when DEPLOY_TARGET = r2
R2_ACCOUNT_ID=your_r2_account_id_here
R2_ACCESS_KEY_ID=your_r2_access_key_id_here
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key_here
R2_BUCKET_NAME=your_r2_bucket_name_here

# Apps Root Domain
# Root domain for user applications, e.g., gemigo.app
# - local: Mainly for generating URLs for preview
# - r2: Must match Cloudflare Worker / DNS domain (*.APPS_ROOT_DOMAIN routes to Worker)
APPS_ROOT_DOMAIN=example.com

# Data Directory
# Backend data directory root path. Automatically creates builds/, apps/, projects.json
# Used for persisting build cache and project list
DATA_DIR=data
